<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>~~查看天氣~~</h1>
    <hr>
    <input type="text" id="city" placeholder="城市名稱">
    <button onclick="getWeather()" >查詢</button>
    <div id="result" ></div>
    
</body>
<script>
    async function getWeather() {
        const city=document.getElementById('city').value;
        const apikey='61cb7aaed5158159fe1bd8fd357c3116';
        const url=`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apikey}&units=metric&lang=zh_tw`;
    
    try{
        const response=await fetch(url);
        const data=await response.json();
        if(response.ok){
            document.getElementById('result').innerHTML=`
            <h3>${data.name}天氣</h3>
            <p>溫度:${data.main.temp}C</p>
            <p>天氣:${data.weather[0].description}</p>`;

            console.log(data);
        
        }
        else{
            document.getElementById('result').innerText=`Error:${data.message}`;

        }

    }catch(error){
        document.getElementById('result').innerText="Error,Tyr Again"

    }
        
    }

</script>
</html>